<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>js  -- avatar</title>
</head>
<body>
	<script type="text/javascript">
		let dragObject = {};
		document.onmousemove = function(e)
		{
			if(!dragObject.elem) return;

			if(!dragObject.avatar)
			{
				let moveX = e.pageX - fragObject.downX;
				let moveY = e.pageY - dragObject.downY;

				if(Math.abs(moveX) < 3 && Math.abs(moveY) < 3)
				{
					return;
				}

				dragObject.avatar = crateAvatar(e);
				if(!dragObject.avatar)
				{
					dragObject = {};
					return; 
				}

				let coords = getCoords(dragObject.avatar);
				dragObject.shiftX = dragObject.downX - coords.left;
				dragObject.shiftY = dragObject.downY - coords.top;

				startDrag(e);   
			}

			dragObject.avatar.style.left = e.pageX - dragObject.shiftX + "px";
			dragObject.avatar.style.top = e.pageY - dragObject.shiftY + "px";
			
			return false;
		}

		function startDrag(e)
		{
			let avatar = dragObjectd.avatar;

			document.body.appendChild(avatar);
			document.body.style.backgroundColor = "#000";
			avatar.style.zInsex = 9999;
			avatar.style.position = "absolute";
		}
	</script>
</body>
</html>